{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\kgoth\\\\Documents\\\\Personal Projects\\\\Chess_Game\\\\src\\\\components\\\\Board\\\\Pieces\\\\Pieces.js\",\n  _s = $RefreshSig$();\nimport './Pieces.css';\nimport Piece from './Piece';\nimport { useRef, useState } from 'react';\nimport { useAppContext } from '../../contexts/Context';\nimport { copyPosition, createPosition } from '../../../helper';\n// import { getNewMoveNotation } from '../../helper'\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Pieces = () => {\n  _s();\n  const {\n    appState,\n    dispatch\n  } = useAppContext();\n  const currentPosition = appState.position[appState.position.length - 1];\n  const ref = useRef();\n  const calculateCoords = e => {\n    const {\n      top,\n      left,\n      width\n    } = ref.current.getBoundingClientRect();\n    const size = width / 8;\n    const y = Math.floor((e.clientX - left) / size);\n    const x = 7 - Math.floor((e.clientY - top) / size);\n    return {\n      x,\n      y\n    };\n  };\n  const onDrop = e => {\n    e.preventDefault();\n    const newPosition = copyPosition(currentPosition);\n    const {\n      x,\n      y\n    } = calculateCoords(e);\n    const [p, rank, file] = e.dataTransfer.getData(\"text\").split(',');\n    newPosition[Number(rank)][Number(file)] = \"\";\n    newPosition[x][y] = p;\n    dispatch();\n    move(e);\n  };\n  const onDragOver = e => {\n    e.preventDefault();\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"pieces\",\n    ref: ref,\n    onDrop: onDrop,\n    onDragOver: onDragOver,\n    children: currentPosition.map((r, rank) => r.map((f, file) => currentPosition[rank][file] ? /*#__PURE__*/_jsxDEV(Piece, {\n      rank: rank,\n      file: file,\n      piece: currentPosition[rank][file]\n    }, rank + '-' + file, false, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 21\n    }, this) : null))\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 35,\n    columnNumber: 12\n  }, this);\n};\n_s(Pieces, \"qs2O/Bw5lJjPsM4hS/+Bm4Hu53c=\", false, function () {\n  return [useAppContext];\n});\n_c = Pieces;\nexport default Pieces;\nvar _c;\n$RefreshReg$(_c, \"Pieces\");","map":{"version":3,"names":["Piece","useRef","useState","useAppContext","copyPosition","createPosition","jsxDEV","_jsxDEV","Pieces","_s","appState","dispatch","currentPosition","position","length","ref","calculateCoords","e","top","left","width","current","getBoundingClientRect","size","y","Math","floor","clientX","x","clientY","onDrop","preventDefault","newPosition","p","rank","file","dataTransfer","getData","split","Number","move","onDragOver","className","children","map","r","f","piece","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/kgoth/Documents/Personal Projects/Chess_Game/src/components/Board/Pieces/Pieces.js"],"sourcesContent":["import './Pieces.css'\r\nimport Piece from './Piece'\r\nimport { useRef, useState  } from 'react'\r\nimport { useAppContext } from '../../contexts/Context'\r\nimport { copyPosition, createPosition } from '../../../helper'\r\n// import { getNewMoveNotation } from '../../helper'\r\n\r\nconst Pieces = () => {\r\n    const { appState , dispatch } = useAppContext();\r\n    const currentPosition = appState.position[appState.position.length-1]\r\n    const ref = useRef()\r\n    \r\n    const calculateCoords = e => {\r\n        const {top,left,width} = ref.current.getBoundingClientRect()\r\n        const size = width / 8\r\n        const y = Math.floor((e.clientX - left) / size) \r\n        const x = 7 - Math.floor((e.clientY - top) / size)\r\n\r\n        return {x,y}\r\n    }\r\n\r\n   const onDrop = e => {\r\n        e.preventDefault()   \r\n        const newPosition = copyPosition(currentPosition)\r\n        const {x,y} = calculateCoords(e)\r\n        const [p,rank,file] = e.dataTransfer.getData(\"text\").split(',')    \r\n        newPosition[Number(rank)][Number(file)] = \"\"\r\n        newPosition[x][y] = p\r\n        dispatch()\r\n        move (e)\r\n    }\r\n    \r\n    const onDragOver = e => {e.preventDefault()}\r\n\r\n    return <div \r\n        className='pieces' \r\n        ref={ref} \r\n        onDrop={onDrop} \r\n        onDragOver={onDragOver} > \r\n        {currentPosition.map((r,rank) => \r\n            r.map((f,file) => \r\n                currentPosition[rank][file]\r\n                ?   <Piece \r\n                        key={rank+'-'+file} \r\n                        rank = {rank}\r\n                        file = {file}\r\n                        piece = {currentPosition[rank][file]}\r\n                    />\r\n                :   null\r\n            )   \r\n        )}\r\n    </div>\r\n    \r\n}\r\nexport default Pieces;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}